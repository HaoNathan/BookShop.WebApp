
<div class="layui-fluid">
    <div class="layui-card">
        <div class="layui-card-header">
            书籍分类饼图
        </div>
        <div class="layui-card-body">
            <div id="container" style="min-width:400px;height:400px"></div>
        </div>
    </div>
</div>
@section js
{
    <script src="https://code.highcharts.com.cn/highcharts/highcharts.js"></script>
    <script src="https://code.highcharts.com.cn/highcharts/modules/exporting.js"></script>
    <script src="https://img.hcharts.cn/highcharts-plugins/highcharts-zh_CN.js"></script>
    <script>
        layui.use(['jquery', 'layer', 'form', 'request', 'laydate', 'unobtrusive'],
            function() {
                var layer = layui.layer;
                var form = layui.form;
                $ = layui.$;
                var laydate = layui.laydate;
                var request = layer.request;
                GetPie();

                function GetPie() {
                    $.post("@Url.Action("GetBookCategoryData", "Report")",
                        null,
                        function(res) {
                            res[0].sliced = true,
                                res[0].selected = true,
                                Highcharts.chart('container',
                                    {
                                        chart: {
                                            plotBackgroundColor: null,
                                            plotBorderWidth: null,
                                            plotShadow: false,
                                            type: 'pie'
                                        },
                                        title: {
                                            text: '2018年1月浏览器市场份额'
                                        },
                                        tooltip: {
                                            pointFormat: '{series.name}: <b>{point.percentage:.1f}%</b>'
                                        },
                                        plotOptions: {
                                            pie: {
                                                allowPointSelect: true,
                                                cursor: 'pointer',
                                                dataLabels: {
                                                    enabled: true,
                                                    format: '<b>{point.name}</b>: {point.percentage:.1f} %',
                                                    style: {
                                                        color: (Highcharts.theme && Highcharts.theme.contrastTextColor) || 'black'
                                                    }
                                                }
                                            }
                                        },
                                        series: [
                                            {
                                                name: 'Brands',
                                                colorByPoint: true,
                                                data: res
                                            }
                                        ]
                                    });
                        });

                }

            });

    </script>
}

